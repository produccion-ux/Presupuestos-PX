<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Presupuestos PX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Rutas corregidas -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#00353F">
    <link rel="apple-touch-icon" href="logo-192.png">

    <style>
        :root {
            --primary-dark: #00353F;
            --primary-gold: #BFA15C;
        }
        .bg-primary-dark { background-color: var(--primary-dark); }
        .text-primary-gold { color: var(--primary-gold); }
        .border-primary-gold { border-color: var(--primary-gold); }
        .ring-primary-gold { --tw-ring-color: var(--primary-gold); }
        body {
            font-family: 'Inter', sans-serif;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        .modal { transition: opacity 0.25s ease; }
        .modal-content { transition: transform 0.25s ease; }
        .toast { animation: fade-in-out 3s ease-in-out forwards; }
        @keyframes fade-in-out {
            0% { opacity: 0; transform: translateY(20px); }
            10% { opacity: 1; transform: translateY(0); }
            90% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-20px); }
        }
        .filter-btn {
            padding: 0.5rem 1rem; border-radius: 9999px; font-weight: 500;
            transition: all 0.2s ease-in-out; border: 1px solid #e5e7eb; color: #4b5563;
        }
        .filter-btn.active {
            background-color: var(--primary-dark); color: white; border-color: var(--primary-dark);
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <div id="app" class="max-w-lg mx-auto bg-white min-h-screen shadow-lg">
        <header class="bg-primary-dark p-4 shadow-md sticky top-0 z-10 flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <!-- Ruta corregida -->
                <img src="logo-192.png" alt="Logo PX" class="h-10 w-10">
                <h1 class="text-2xl font-bold text-white">Presupuestos PX</h1>
            </div>
        </header>

        <main class="p-4 space-y-6 pb-24">
            
            <div id="sync-section" class="bg-gray-50 border p-3 rounded-lg space-y-3">
                 <div id="project-id-display" class="hidden">
                    <label class="block text-sm font-medium text-gray-700">ID de tu Proyecto (para sincronizar):</label>
                    <div class="mt-1 flex rounded-md shadow-sm">
                        <input type="text" id="project-id-input" readonly class="block w-full rounded-none rounded-l-md border-gray-300 bg-gray-200 px-3 py-2 text-gray-600 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                        <button id="copy-id-btn" type="button" class="relative -ml-px inline-flex items-center space-x-2 rounded-r-md border border-gray-300 bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M200,32H163.74a47.92,47.92,0,0,0-71.48,0H56A24,24,0,0,0,32,56V216a24,24,0,0,0,24,24H200a24,24,0,0,0,24-24V56A24,24,0,0,0,200,32Zm-72,0a32,32,0,1,1-32,32A32,32,0,0,1,128,32Zm72,184H56V56h8v8a24,24,0,0,0,24,24h80a24,24,0,0,0,24-24v-8h8Z"></path></svg>
                            <span>Copiar</span>
                        </button>
                    </div>
                </div>

                <div id="load-project-section" class="space-y-2">
                     <p class="text-sm text-center text-gray-600">¿Tienes un ID de proyecto? Cárgalo aquí.</p>
                     <div class="flex gap-2">
                        <input type="text" id="load-id-input" placeholder="Pega el ID del proyecto" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2">
                        <button id="load-project-btn" class="bg-primary-dark text-white font-semibold py-2 px-4 rounded-lg hover:bg-opacity-90">Cargar</button>
                    </div>
                </div>
            </div>

            <div id="main-content" class="hidden space-y-6">
                <div id="project-details" class="space-y-2">
                    <div class="flex justify-between items-center">
                        <h2 id="project-name" class="text-xl font-semibold text-primary-dark"></h2>
                        <button id="edit-project-btn" class="text-primary-dark hover:text-primary-gold p-1 rounded-full">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256"><path d="M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.68,147.31,64l24-24L216,84.68Z"></path></svg>
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-blue-50 border border-blue-200 p-3 rounded-lg"><h3 class="text-sm font-medium text-blue-700">Presupuesto Disponible</h3><p id="available-budget" class="text-xl font-bold text-blue-900"></p></div>
                    <div class="bg-red-50 border border-red-200 p-3 rounded-lg"><h3 class="text-sm font-medium text-red-700">Total Gastado</h3><p id="total-spent" class="text-xl font-bold text-red-900"></p></div>
                    <div class="bg-green-50 border border-green-200 p-3 rounded-lg"><h3 class="text-sm font-medium text-green-700">Saldo Cliente</h3><p id="client-balance" class="text-xl font-bold text-green-900"></p></div>
                    <div class="bg-yellow-50 border border-yellow-200 p-3 rounded-lg"><h3 id="filtered-total-title" class="text-sm font-medium text-yellow-700">Total Gastos (Filtro)</h3><p id="filtered-total" class="text-xl font-bold text-yellow-900"></p></div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold mb-2 text-primary-dark">Movimientos</h3>
                    <div class="flex space-x-2 mb-4 text-sm" id="filter-buttons">
                        <button data-filter="all" class="filter-btn active">Todos los Gastos</button>
                        <button data-filter="gasto_incluido" class="filter-btn">Incluidos</button>
                        <button data-filter="gasto_extra" class="filter-btn">Extras</button>
                        <button data-filter="abono_cliente" class="filter-btn">Abonos</button>
                    </div>
                    <div id="transactions-list" class="space-y-3"></div>
                </div>

                <div class="mt-8 border-t pt-6 space-y-3">
                    <h3 class="text-lg font-semibold text-primary-dark">Acciones del Proyecto</h3>
                    <button id="export-btn" class="w-full bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg flex items-center justify-center space-x-2 hover:bg-gray-300">
                         <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256"><path d="M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"></path></svg>
                        <span>Exportar Datos</span>
                    </button>
                    <button id="reset-btn" class="w-full bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg flex items-center justify-center space-x-2 hover:bg-red-200">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M238,128a10,10,0,0,1-10,10H144.3l31.55,31.55a10,10,0,0,1-14.14,14.14l-49.8-49.8a10,10,0,0,1,0-14.14l49.8-49.8a10,10,0,0,1,14.14,14.14L144.3,118H228A10,10,0,0,1,238,128ZM111.7,46.15a10,10,0,0,0-14.14-14.14L31.81,97.76a10,10,0,0,0,0,14.14l65.75,65.75a10,10,0,0,0,14.14-14.14L80.15,132H28a10,10,0,0,1,0-20H80.15l31.55-31.55Z"></path></svg>
                        <span>Crear/Cargar Otro Proyecto</span>
                    </button>
                </div>
            </div>
        </main>

        <button id="add-transaction-btn" class="hidden bg-primary-gold text-white w-14 h-14 rounded-full fixed bottom-6 right-6 items-center justify-center shadow-lg transform hover:scale-110 transition-transform">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M228,128a12,12,0,0,1-12,12H136v80a12,12,0,0,1-24,0V140H32a12,12,0,0,1,0-24h80V36a12,12,0,0,1,24,0v80h80A12,12,0,0,1,228,128Z"></path></svg>
        </button>

        <div id="modal-container"></div>
        <div id="toast" class="toast hidden fixed bottom-24 right-6 bg-primary-dark text-white py-2 px-4 rounded-lg shadow-xl"><p id="toast-message"></p></div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // *********************************************************************************
        // PASO 1: Pega tu configuración de Firebase aquí
        // Reemplaza este objeto con el que obtuviste de la consola de Firebase.
        // *********************************************************************************
        const firebaseConfig = {
            apiKey: "AIzaSyBPju-qziiySXSOwjiPW9pcR0_mwFE5j1s",
            authDomain: "presupuestos-px.firebaseapp.com",
            projectId: "presupuestos-px",
            storageBucket: "presupuestos-px.firebasestorage.app",
            messagingSenderId: "758674286792",
            appId: "1:758674286792:web:703ed99be79fd5e4ac5dfd",
        };
        
        // --- NO MODIFICAR DEBAJO DE ESTA LÍNEA ---
        const appFirebase = initializeApp(firebaseConfig);
        const db = getFirestore(appFirebase);

        const app = {
            projectData: null,
            projectId: null,
            currentFilter: 'all',
            unsubscribe: null, 

            init() {
                this.attachEventListeners();
                this.checkLocalProjectId();
            },
            
            checkLocalProjectId() {
                const localId = localStorage.getItem('presupuestosPXProjectId');
                if (localId) {
                    this.loadProject(localId);
                } else {
                    this.showToast("Crea un proyecto nuevo o carga uno con su ID.");
                    document.getElementById('reset-btn').querySelector('span').textContent = 'Crear Proyecto Nuevo';
                }
            },

            async loadProject(id) {
                if (!id) { this.showToast("Por favor, ingresa un ID."); return; }
                this.projectId = id.trim();

                if (this.unsubscribe) this.unsubscribe(); 

                const docRef = doc(db, "projects", this.projectId);
                this.showToast("Cargando proyecto...");
                
                this.unsubscribe = onSnapshot(docRef, (docSnap) => {
                    if (docSnap.exists()) {
                        this.projectData = docSnap.data();
                        this.showToast("Proyecto cargado y sincronizado.");
                        this.showMainContent();
                        this.updateUI();
                    } else {
                        this.showToast("ID no encontrado. ¿Crear proyecto con este ID?");
                        this.projectData = null;
                        this.hideMainContent();
                        document.getElementById('reset-btn').querySelector('span').textContent = 'Crear Proyecto Nuevo';
                    }
                    localStorage.setItem('presupuestosPXProjectId', this.projectId);
                }, (error) => {
                    console.error("Error listening to project: ", error);
                    this.showToast("Error de conexión. Verifica la configuración de Firebase.");
                });
            },

            async createNewProject() {
                let newId = this.projectId || `proj_${Date.now()}`;
                const newProjectData = {
                    name: "Mi Nueva Obra", totalValue: 0, estimatedBudget: 0, transactions: []
                };
                try {
                    await setDoc(doc(db, "projects", newId), newProjectData);
                    this.loadProject(newId);
                } catch(e) { console.error("Error creating document: ", e); this.showToast("Error al crear el proyecto."); }
            },

            showMainContent() {
                document.getElementById('main-content').classList.remove('hidden');
                document.getElementById('add-transaction-btn').classList.add('flex');
                document.getElementById('add-transaction-btn').classList.remove('hidden');
                document.getElementById('project-id-input').value = this.projectId;
                document.getElementById('project-id-display').classList.remove('hidden');
                document.getElementById('load-project-section').classList.add('hidden');
                document.getElementById('reset-btn').querySelector('span').textContent = 'Crear/Cargar Otro Proyecto';
            },

            hideMainContent() {
                document.getElementById('main-content').classList.add('hidden');
                document.getElementById('add-transaction-btn').classList.remove('flex');
                document.getElementById('add-transaction-btn').classList.add('hidden');
                document.getElementById('project-id-display').classList.add('hidden');
                document.getElementById('load-project-section').classList.remove('hidden');
            },

            resetApp() {
                if(this.unsubscribe) this.unsubscribe();
                localStorage.removeItem('presupuestosPXProjectId');
                this.projectId = null;
                this.projectData = null;
                this.hideMainContent();
                document.getElementById('load-id-input').value = '';
                this.showToast("Listo para crear o cargar un proyecto.");
                document.getElementById('reset-btn').querySelector('span').textContent = 'Crear Proyecto Nuevo';
            },
            
            async saveData() {
                if (!this.projectId || !this.projectData) return;
                try {
                    await setDoc(doc(db, "projects", this.projectId), this.projectData);
                    this.showToast("Cambios guardados en la nube.");
                } catch(e) { console.error("Error saving data: ", e); this.showToast("Error al guardar. Verifica tu conexión.");}
            },

             attachEventListeners() {
                document.getElementById('load-project-btn').addEventListener('click', () => {
                    const idToLoad = document.getElementById('load-id-input').value; this.loadProject(idToLoad);
                });
                document.getElementById('copy-id-btn').addEventListener('click', () => {
                    const idInput = document.getElementById('project-id-input'); idInput.select(); document.execCommand('copy'); this.showToast("ID copiado.");
                });
                document.getElementById('reset-btn').addEventListener('click', () => {
                    if (!this.projectId) { this.createNewProject(); } else { this.resetApp(); }
                });
                document.getElementById('add-transaction-btn').addEventListener('click', () => this.openTransactionModal());
                document.getElementById('edit-project-btn').addEventListener('click', () => this.openProjectModal());
                document.getElementById('export-btn').addEventListener('click', () => this.exportData());
                document.querySelectorAll('.filter-btn').forEach(button => {
                    button.addEventListener('click', (e) => this.setFilter(e.target.dataset.filter));
                });
            },
            
            setFilter(filter) { this.currentFilter = filter; this.updateUI(); },

            formatCurrency(amount) {
                return new Intl.NumberFormat('es-CO', { style: 'currency', currency: 'COP', minimumFractionDigits: 0 }).format(amount);
            },
            
            updateUI() {
                if (!this.projectData) return;
                const proj = this.projectData;
                document.getElementById('project-name').textContent = proj.name;

                const transactions = proj.transactions || [];
                const totalGastosIncluidos = transactions.filter(t => t.type === 'gasto_incluido').reduce((sum, t) => sum + t.amount, 0);
                const totalGastosExtras = transactions.filter(t => t.type === 'gasto_extra').reduce((sum, t) => sum + t.amount, 0);
                const totalAbonos = transactions.filter(t => t.type === 'abono_cliente').reduce((sum, t) => sum + t.amount, 0);
                const totalGastadoGeneral = totalGastosIncluidos + totalGastosExtras;
                const presupuestoDisponible = proj.estimatedBudget - totalGastadoGeneral;
                const saldoCliente = proj.totalValue - totalAbonos;

                document.getElementById('available-budget').textContent = this.formatCurrency(presupuestoDisponible);
                document.getElementById('total-spent').textContent = this.formatCurrency(totalGastadoGeneral);
                document.getElementById('client-balance').textContent = this.formatCurrency(saldoCliente);

                const filteredTransactions = transactions.filter(t => {
                    if (this.currentFilter === 'all') return t.type === 'gasto_incluido' || t.type === 'gasto_extra';
                    return t.type === this.currentFilter;
                });
                const filteredTotal = filteredTransactions.reduce((sum, t) => sum + t.amount, 0);
                const filteredTitleEl = document.getElementById('filtered-total-title');
                
                switch(this.currentFilter) {
                    case 'gasto_incluido': filteredTitleEl.textContent = 'Total Gastos Incluidos'; break;
                    case 'gasto_extra': filteredTitleEl.textContent = 'Total Gastos Extras'; break;
                    case 'abono_cliente': filteredTitleEl.textContent = 'Total Abonos'; break;
                    default: filteredTitleEl.textContent = 'Total de Gastos';
                }
                document.getElementById('filtered-total').textContent = this.formatCurrency(filteredTotal);
                this.renderTransactionList(filteredTransactions);
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.filter === this.currentFilter);
                });
            },
            
            renderTransactionList(transactions) {
                const listEl = document.getElementById('transactions-list');
                listEl.innerHTML = ''; 
                if (transactions.length === 0) { listEl.innerHTML = `<p class="text-gray-500 italic text-center mt-4">No hay movimientos que coincidan.</p>`; return; }

                transactions.slice().sort((a,b) => new Date(b.date) - new Date(a.date)).forEach(t => {
                    const isExpense = t.type.startsWith('gasto');
                    const sign = isExpense ? '-' : '+';
                    const colorClass = isExpense ? 'text-red-600' : 'text-green-600';
                    const typeText = t.type.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase());
                    const transactionEl = document.createElement('div');
                    transactionEl.className = 'bg-white p-3 rounded-lg border flex justify-between items-center';
                    transactionEl.innerHTML = `<div class="flex items-center space-x-3"><div class="w-12 h-12 bg-gray-200 rounded-md flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#9CA3AF" viewBox="0 0 256 256"><path d="M200,32H56A24,24,0,0,0,32,56V200a24,24,0,0,0,24,24H200a24,24,0,0,0,24-24V56A24,24,0,0,0,200,32Zm8,168a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V56a8,8,0,0,1,8-8H200a8,8,0,0,1,8,8ZM112,88a32,32,0,1,1-32,32A32,32,0,0,1,112,88Zm-4.4,55.6L80,184H176l-32.8-54.67a8,8,0,0,0-13.6,0Z"></path></svg></div><div><p class="font-semibold">${t.description}</p><p class="text-xs text-gray-500">${new Date(t.date).toLocaleDateString('es-CO')} - ${typeText}</p></div></div><div class="text-right"><p class="font-bold text-lg ${colorClass}">${sign} ${this.formatCurrency(t.amount)}</p><button onclick="app.deleteTransaction('${t.id}')" class="text-xs text-gray-400 hover:text-red-500 mt-1">Eliminar</button></div>`;
                    listEl.appendChild(transactionEl);
                });
            },
            
            openProjectModal() {
                 const content = `<form id="project-form" class="space-y-4"><div><label for="p-name" class="block text-sm font-medium text-gray-700">Nombre</label><input type="text" id="p-name" value="${this.projectData.name}" class="mt-1 block w-full border rounded-md py-2 px-3" required></div><div><label for="p-total" class="block text-sm">Valor Total ($)</label><input type="number" id="p-total" value="${this.projectData.totalValue}" class="mt-1 block w-full border rounded-md py-2 px-3" required></div><div><label for="p-budget" class="block text-sm">Presupuesto ($)</label><input type="number" id="p-budget" value="${this.projectData.estimatedBudget}" class="mt-1 block w-full border rounded-md py-2 px-3" required></div><div class="flex justify-end pt-2"><button type="submit" class="bg-primary-dark text-white py-2 px-5 rounded-lg">Guardar</button></div></form>`;
                const modal = this.createModal('Editar Detalles de la Obra', content);
                modal.querySelector('#project-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.projectData.name = document.getElementById('p-name').value;
                    this.projectData.totalValue = parseFloat(document.getElementById('p-total').value);
                    this.projectData.estimatedBudget = parseFloat(document.getElementById('p-budget').value);
                    this.saveData(); this.closeModal();
                });
            },

            openTransactionModal() {
                const content = `<form id="transaction-form" class="space-y-4"><div><label for="t-description" class="block text-sm">Descripción</label><input type="text" id="t-description" class="mt-1 block w-full border rounded-md py-2 px-3" required></div><div><label for="t-amount" class="block text-sm">Monto ($)</label><input type="number" id="t-amount" class="mt-1 block w-full border rounded-md py-2 px-3" required></div><div><label for="t-type" class="block text-sm">Tipo</label><select id="t-type" class="mt-1 block w-full border rounded-md py-2 px-3"><option value="gasto_incluido">Gasto Incluido</option><option value="gasto_extra">Gasto Extra</option><option value="abono_cliente">Abono Cliente</option></select></div><div class="flex justify-end pt-2"><button type="submit" class="bg-primary-dark text-white py-2 px-5 rounded-lg">Agregar</button></div></form>`;
                const modal = this.createModal('Nuevo Movimiento', content);
                modal.querySelector('#transaction-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const newTransaction = { id: `txn_${Date.now()}`, description: document.getElementById('t-description').value, amount: parseFloat(document.getElementById('t-amount').value), type: document.getElementById('t-type').value, date: new Date().toISOString(), };
                    if (!this.projectData.transactions) this.projectData.transactions = [];
                    this.projectData.transactions.push(newTransaction);
                    this.saveData(); this.closeModal();
                });
            },
            
            deleteTransaction(id) { this.projectData.transactions = this.projectData.transactions.filter(t => t.id !== id); this.saveData(); },

            exportData() {
                if(!this.projectData) return;
                try {
                    const dataStr = JSON.stringify(this.projectData, null, 2); const dataBlob = new Blob([dataStr], {type: "application/json"}); const url = URL.createObjectURL(dataBlob); const link = document.createElement('a'); link.download = `presupuesto_px_${this.projectId}.json`; link.href = url; link.click(); URL.revokeObjectURL(url);
                } catch (error) { console.error("Error exporting data:", error); }
            },

            createModal(title, content) {
                const modalContainer = document.getElementById('modal-container'); const modal = document.createElement('div'); modal.id = 'modal'; modal.className = 'modal fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50';
                modal.innerHTML = `<div class="modal-content bg-white rounded-lg shadow-xl w-full max-w-md p-6"><div class="flex justify-between items-center mb-4"><h3 class="text-xl font-bold text-primary-dark">${title}</h3><button id="close-modal-btn" class="text-gray-500 hover:text-gray-800 text-3xl">&times;</button></div><div>${content}</div></div>`;
                modalContainer.appendChild(modal); modal.addEventListener('click', (e) => { if (e.target.id === 'modal') this.closeModal(); }); document.getElementById('close-modal-btn').addEventListener('click', () => this.closeModal()); return modal;
            },
            
            closeModal() { const modal = document.getElementById('modal'); if (modal) modal.parentElement.innerHTML = ''; },

            showToast(message) {
                const toastEl = document.getElementById('toast'); toastEl.querySelector('p').textContent = message; toastEl.classList.remove('hidden'); setTimeout(() => toastEl.classList.add('hidden'), 3000);
            },
            
            registerSW() {
                if ('serviceWorker' in navigator) {
                    // Ruta corregida para el service worker
                    window.addEventListener('load', () => {
                        navigator.serviceWorker.register('sw.js')
                            .then(reg => console.log('SW registered.', reg))
                            .catch(err => console.error('SW registration failed: ', err));
                    });
                }
            }
        };
        
        app.init();
    </script>
</body>
</html>

